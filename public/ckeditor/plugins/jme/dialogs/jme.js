CKEDITOR.dialog.add("jmeDialog",function(a){var b="math_frame_"+a.id;return{title:"公式编辑",minWidth:500,minHeight:300,contents:[{id:"tab-basic",label:"Editor",elements:[{type:"html",html:'\x3cdiv style\x3d"width:500px;height:300px;"\x3e\x3ciframe id\x3d"'+b+'" style\x3d"width:500px;height:300px;" frameborder\x3d"no" src\x3d"'+CKEDITOR.basePath+'plugins/jme/dialogs/mathdialog.html"\x3e\x3c/iframe\x3e\x3c/div\x3e'}]}],onShow:function(){},onOk:function(){var c=getIFrameDOM(b),e='\x3cspan class\x3d"mathquill-rendered-math" style\x3d"font-size:20px;" data-cke-filter\x3d"off" data-latex\x3d"'+
getIFrame(b).contentWindow.jQuery("#jme-math").mathquill("latex")+'"\x3e'+$("#jme-math",c).html()+"\x3c/span\x3e\x3cspan\x3e\x26nbsp;\x3c/span\x3e",c=getIFrame(b).contentWindow.jQuery("#jme-math",c),d=getIFrame(b).contentWindow.jQuery('\x3cspan id\x3d"jme-math"\x3e\x3c/span\x3e');d.insertAfter(c);c.remove();d.css("font-size","20px").mathquill("editable").mathquill("write","");a.insertHtml(e,"unfiltered_html")}}});function getIFrameDOM(a){a=getIFrame(a);return a.document||a.contentDocument}
function getIFrame(a){return document.frames?document.frames[a]:document.getElementById(a)};